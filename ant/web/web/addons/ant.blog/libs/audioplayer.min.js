(function(e,t,a,i){var n="ontouchstart"in t,o=n?"touchstart":"mousedown",l=n?"touchmove":"mousemove",u=n?"touchend":"mouseup",d=n?"touchcancel":"mouseup",s=function(e){var t=e/3600,a=Math.floor(t),i=e%3600/60,n=Math.floor(i),o=Math.ceil(e%3600%60);if(o>59){o=0;n=Math.ceil(i)}if(n>59){n=0;a=Math.ceil(t)}return(a==0?"":a>0&&a.toString().length<2?"0"+a+":":a+":")+(n.toString().length<2?"0"+n:n)+":"+(o.toString().length<2?"0"+o:o)},r=function(e){var t=a.createElement("audio");return!!(t.canPlayType&&t.canPlayType("audio/"+e.split(".").pop().toLowerCase()+";").replace(/no/,""))};e.fn.audioPlayer=function(t){var t=e.extend({classPrefix:"audioplayer",strPlay:"Play",strPause:"Pause",strVolume:"Volume"},t),a={},i={playPause:"playpause",playing:"playing",stopped:"stopped",time:"time",timeCurrent:"time-current",timeDuration:"time-duration",bar:"bar",barLoaded:"bar-loaded",barPlayed:"bar-played",volume:"volume",volumeButton:"volume-button",volumeAdjust:"volume-adjust",noVolume:"novolume",muted:"muted",mini:"mini"};for(var u in i)a[u]=t.classPrefix+"-"+i[u];this.each(function(){if(e(this).prop("tagName").toLowerCase()!="audio")return false;var i=e(this),u=i.attr("src"),f=i.get(0).getAttribute("autoplay"),f=f===""||f==="autoplay"?true:false,m=i.get(0).getAttribute("loop"),m=m===""||m==="loop"?true:false,v=false;if(typeof u==="undefined"){i.find("source").each(function(){u=e(this).attr("src");if(typeof u!=="undefined"&&r(u)){v=true;return false}})}else if(r(u))v=true;var c=e('<div class="'+t.classPrefix+'">'+(v?e("<div>").append(i.eq(0).clone()).html():'<embed src="'+u+'" width="0" height="0" volume="100" autostart="'+f.toString()+'" loop="'+m.toString()+'" />')+'<div class="'+a.playPause+'" title="'+t.strPlay+'"><a href="#">'+t.strPlay+"</a></div></div>"),h=v?c.find("audio"):c.find("embed"),h=h.get(0);if(v){c.find("audio").css({width:0,height:0,visibility:"hidden"});c.append('<div class="'+a.time+" "+a.timeCurrent+'"></div><div class="'+a.bar+'"><div class="'+a.barLoaded+'"></div><div class="'+a.barPlayed+'"></div></div><div class="'+a.time+" "+a.timeDuration+'"></div><div class="'+a.volume+'"><div class="'+a.volumeButton+'" title="'+t.strVolume+'"><a href="#">'+t.strVolume+'</a></div><div class="'+a.volumeAdjust+'"><div><div></div></div></div></div>');var p=c.find("."+a.bar),y=c.find("."+a.barPlayed),g=c.find("."+a.barLoaded),b=c.find("."+a.timeCurrent),P=c.find("."+a.timeDuration),C=c.find("."+a.volumeButton),E=c.find("."+a.volumeAdjust+" > div"),w=0,M=function(e){theRealEvent=n?e.originalEvent.touches[0]:e;h.currentTime=Math.round(h.duration*(theRealEvent.pageX-p.offset().left)/p.width())},L=function(e){theRealEvent=n?e.originalEvent.touches[0]:e;h.volume=Math.abs((theRealEvent.pageY-(E.offset().top+E.height()))/E.height())},S=function(){var e=setInterval(function(){if(h.buffered.length<1)return true;g.width(h.buffered.end(0)/h.duration*100+"%");if(Math.floor(h.buffered.end(0))>=Math.floor(h.duration))clearInterval(e)},100)};var V=h.volume,j=h.volume=.111;if(Math.round(h.volume*1e3)/1e3==j)h.volume=V;else c.addClass(a.noVolume);P.html("&hellip;");b.html(s(0));h.addEventListener("loadeddata",function(){S();P.html(e.isNumeric(h.duration)?s(h.duration):"&hellip;");E.find("div").height(h.volume*100+"%");w=h.volume});h.addEventListener("timeupdate",function(){b.html(s(h.currentTime));y.width(h.currentTime/h.duration*100+"%")});h.addEventListener("volumechange",function(){E.find("div").height(h.volume*100+"%");if(h.volume>0&&c.hasClass(a.muted))c.removeClass(a.muted);if(h.volume<=0&&!c.hasClass(a.muted))c.addClass(a.muted)});h.addEventListener("ended",function(){c.removeClass(a.playing).addClass(a.stopped)});p.on(o,function(e){M(e);p.on(l,function(e){M(e)})}).on(d,function(){p.unbind(l)});C.on("click",function(){if(c.hasClass(a.muted)){c.removeClass(a.muted);h.volume=w}else{c.addClass(a.muted);w=h.volume;h.volume=0}return false});E.on(o,function(e){L(e);E.on(l,function(e){L(e)})}).on(d,function(){E.unbind(l)})}else c.addClass(a.mini);c.addClass(f?a.playing:a.stopped);c.find("."+a.playPause).on("click",function(){if(c.hasClass(a.playing)){e(this).attr("title",t.strPlay).find("a").html(t.strPlay);c.removeClass(a.playing).addClass(a.stopped);v?h.pause():h.Stop()}else{e(this).attr("title",t.strPause).find("a").html(t.strPause);c.addClass(a.playing).removeClass(a.stopped);v?h.play():h.Play()}return false});i.replaceWith(c)});return this}})(jQuery,window,document);